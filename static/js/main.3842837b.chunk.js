(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(69)},27:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},37:function(e,t,a){},65:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),o=a.n(s),i=(a(27),a(5)),c=a(6),l=a(9),u=a(7),h=a(8),d=a(4),m=(a(29),a(31),a(33),a(12)),p=a(13),g=a(10);m.b.add(g.a,g.b);var f=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.business;return r.a.createElement("div",{className:"Business"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:e.imageSrc,alt:""}),r.a.createElement("h2",null,e.name),r.a.createElement("div",{className:"Business-information"},r.a.createElement("div",{className:"Business-address"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://www.google.com/maps/place/"+e.address+" "+e.city,target:"_blank",rel:"noopener noreferrer"},e.address,"  ",r.a.createElement(p.a,{icon:"map-marker-alt"}))),r.a.createElement("p",null,e.city),r.a.createElement("p",null,e.state," ",e.zipCode),r.a.createElement("p",null,e.phone,r.a.createElement(p.a,{icon:"phone"}))),r.a.createElement("div",{className:"Business-reviews"},r.a.createElement("h3",null,e.category),r.a.createElement("h3",null,e.priceRange),r.a.createElement("h3",{className:"rating"},e.rating," star",e.rating>0&&e.rating<=1?"":"s"),r.a.createElement("p",null,e.reviewCount," review",1===e.reviewCount?"":"s"))),r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},"Open restaurant's page")))}}]),t}(r.a.Component),b=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"BusinessList"},this.props.businesses.map(function(e){return r.a.createElement(f,{key:e.id,business:e})}))}}]),t}(r.a.Component),v=(a(37),{"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"}),E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={term:"",location:"",sortBy:"best_match",termError:!1,locationError:!1},a.handleTermChange=a.handleTermChange.bind(Object(d.a)(Object(d.a)(a))),a.handleLocationChange=a.handleLocationChange.bind(Object(d.a)(Object(d.a)(a))),a.handleSearch=a.handleSearch.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getSortByClass",value:function(e){return e===this.state.sortBy?"active":""}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value,termError:e.target.value.length>0&&!1})}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value,locationError:e.target.value.length>0&&!1})}},{key:"handleSortByChange",value:function(e){this.setState({sortBy:e}),""!==this.state.term&&""!==this.state.location&&this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)}},{key:"handleSearch",value:function(e){"click"!==e.type&&13!==e.keyCode||(this.props.clearErrorMessageAndSearchResults(),""===this.state.location&&""===this.state.term?this.setState({termError:!0,locationError:!0}):""===this.state.term?this.setState({termError:!0,locationError:!1}):""===this.state.location?this.setState({termError:!1,locationError:!0}):(this.setState({termError:!1,locationError:!1,loading:!0}),this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)),e.preventDefault())}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(v).map(function(t){var a=v[t];return r.a.createElement("li",{className:e.getSortByClass(a),key:a,onClick:e.handleSortByChange.bind(e,a)},t)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("div",{className:"SearchBar-sort-options"},r.a.createElement("ul",null,this.renderSortByOptions())),r.a.createElement("div",{className:"SearchBar-fields"},r.a.createElement("form",{method:"#",onKeyDown:this.handleSearch,autoComplete:"on"},r.a.createElement("div",null,r.a.createElement("div",{className:"inputFieldErrorMessage"},this.state.termError&&"The field cannot be empty"),r.a.createElement("input",{onChange:this.handleTermChange,placeholder:"Search Businesses",className:this.state.termError&&"inputFieldError"})),r.a.createElement("div",null,r.a.createElement("div",{className:"inputFieldErrorMessage"},this.state.locationError&&"The field cannot be empty"),r.a.createElement("input",{onChange:this.handleLocationChange,placeholder:"Where?",className:this.state.locationError&&"inputFieldError"})))),r.a.createElement("div",{className:"SearchBar-submit"},r.a.createElement("a",{onClick:this.handleSearch},"Let's Go")))}}]),t}(r.a.Component),y=function(e,t,a){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(a),{headers:{Authorization:"Bearer ".concat("AtXwTkXAS_KRjWQfaQqZby_CgxqfySQsmzZwqXZjglLvYi29i69_ToIcvXeGPYMG75gqVTQz9o-U-kxr8FKrt-vIdsCNpweeNnf3NVuYlInAm2MrHqeb5DhmamhGXHYx")}}).then(function(e){return e.json()}).then(function(e){return e.businesses.map(function(t){if(e.businesses)return{id:t.id,imageSrc:t.image_url,name:t.name,address:t.location.address1,city:t.location.city,state:t.location.state,zipCode:t.location.zip_code,category:t.categories[0].title,rating:t.rating,reviewCount:t.review_count,url:t.url,phone:t.phone,priceRange:t.price};throw Error("Nothing was returned")})}).catch(function(){return[]})},w=a(20),j=a(2),O=a(21);a(65);function S(){var e=Object(w.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 7% auto;\n    text-align: center;\n"]);return S=function(){return e},e}var k=Object(j.css)(S()),C=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{class:"sweet-loading"},r.a.createElement(O.FadeLoader,{css:k,sizeUnit:"rem",size:6,color:"black",loading:this.props.loading}))}}]),t}(r.a.Component),B=(a(67),function(e){return r.a.createElement("h3",{className:"error"},e.errorMessage)}),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={businesses:[],loading:!1,errorMessage:""},a.searchYelp=a.searchYelp.bind(Object(d.a)(Object(d.a)(a))),a.clearErrorMessageAndSearchResults=a.clearErrorMessageAndSearchResults.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"searchYelp",value:function(e,t,a){var n=this;this.setState({businesses:[],loading:g.c}),y(e,t,a).then(function(e){e.length>0?n.setState({loading:!1,businesses:e,errorMessage:""}):n.setState({loading:!1,businesses:[],errorMessage:"Your search hasn't returned any results. Please check your input or the Internet connection"})})}},{key:"clearErrorMessageAndSearchResults",value:function(){this.setState({businesses:[],errorMessage:""})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Ravenous"),r.a.createElement(E,{searchYelp:this.searchYelp,clearErrorMessageAndSearchResults:this.clearErrorMessageAndSearchResults}),r.a.createElement(C,{loading:this.state.loading}),r.a.createElement(b,{businesses:this.state.businesses}),r.a.createElement(B,{errorMessage:this.state.errorMessage}))}}]),t}(r.a.Component),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(N,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/search-restaurants",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/search-restaurants","/service-worker.js");M?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):A(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):A(t,e)})}}()}},[[22,2,1]]]);
//# sourceMappingURL=main.3842837b.chunk.js.map