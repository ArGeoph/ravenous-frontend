(this.webpackJsonpravenous=this.webpackJsonpravenous||[]).push([[0],{17:function(e,t,a){e.exports=a(61)},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),o=a.n(r),i=(a(22),a(23),a(24),a(4)),l=a(8),c=a(5);const u={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"};i.b.add(c.a,c.b);const h=e=>{const t=e.business,a=t.address,n=t.category,r=t.city,o=t.imageSrc,i=t.name,c=t.phone,u=t.priceRange,h=t.rating,m=t.reviewCount,d=t.state,g=t.url,p=t.zipCode;return s.a.createElement("div",{className:"Business"},s.a.createElement("div",{className:"image-container"},s.a.createElement("img",{src:o,alt:i,loading:"lazy"}),s.a.createElement("h2",null,i),s.a.createElement("div",{className:"Business-information"},s.a.createElement("div",{className:"Business-address"},s.a.createElement("p",null,s.a.createElement("a",{href:"".concat("https://www.google.com/maps/place/").concat(a," ").concat(r),target:"_blank",rel:"noopener noreferrer"},a," ",s.a.createElement(l.a,{icon:"map-marker-alt"}))),s.a.createElement("p",null,r),s.a.createElement("p",null,d," ",p),s.a.createElement("p",null,c,s.a.createElement(l.a,{icon:"phone"}))),s.a.createElement("div",{className:"Business-reviews"},s.a.createElement("h3",null,n),s.a.createElement("h3",null,u),s.a.createElement("h3",{className:"rating"},h," star",h>0&&h<=1?"":"s"),s.a.createElement("p",null,m," review",1===m?"":"s"))),s.a.createElement("a",{href:g,target:"_blank",rel:"noopener noreferrer"},"Open restaurants's page")))};a(30);const m=s.a.memo(({businesses:e})=>s.a.createElement("div",{className:"BusinessList"},e.map(e=>s.a.createElement(h,{key:e.id,business:e}))));var d=a(9),g=a.n(d),p=a(13);const E=["mcdonald's","kfc","sushi","subway","pizza","steakhouse","korean","german","french","ethiopian","arab","uzbek","greek","italian","thai","vietnamese","indian","chinese","russian","mexican","american","cuban","ukrainian","canadian","japanese","steak","downtown","mediterranean","fast food","bbq","brazilian","vegetarian","punjabi"];var v=function(){var e=Object(p.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a(32);class f extends n.Component{constructor(e){super(e),this.handleClick=e=>{this.props.setTermValue(e.currentTarget.innerHTML),this.setState({suggestionsEnabled:!1})},this.handleKeyPress=e=>{console.log(e.keyCode)},this.state={activeItem:null,filteredSuggestions:[],suggestions:[],suggestionsEnabled:this.props.suggestionsEnabled}}componentDidMount(){v(this.props).then(e=>{this.setState({suggestions:e})})}componentWillReceiveProps(e){let t;if(!e.suggestionsEnabled||this.state.filteredSuggestions.includes(e.userInput)||!e.userInput)return this.setState({suggestionsEnabled:!1}),null;t=this.state.suggestions.filter(t=>t.toLowerCase().startsWith(e.userInput.toLowerCase())),this.setState({filteredSuggestions:t,suggestionsEnabled:!0})}render(){return this.state.suggestionsEnabled?s.a.createElement("ul",{className:"suggestions",onKeyDown:this.handleKeyPress},this.state.filteredSuggestions.map(e=>s.a.createElement("li",{className:"suggestionItem",key:e,onClick:this.handleClick,value:e},e))):null}}var b=f;a(33);class w extends n.Component{constructor(e){super(e),this.handleTermChange=e=>{this.setState({term:e.target.value,termError:e.target.value.length>0&&!1,termAutocompletionEnabled:!0}),e.preventDefault()},this.handleLocationChange=e=>{this.setState({location:e.target.value,locationError:e.target.value.length>0&&!1})},this.handleSearch=e=>{"click"!==e.type&&13!==e.keyCode||(this.props.clearErrorMessageAndSearchResults(),""===this.state.location&&""===this.state.term?this.setState({termError:!0,locationError:!0}):""===this.state.term?this.setState({termError:!0,locationError:!1}):""===this.state.location?this.setState({termError:!1,locationError:!0}):(this.setState({termError:!1,locationError:!1,loading:!0}),this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)),e.preventDefault())},this.setTermValue=e=>{this.setState({term:e}),this.refs.locationField.focus()},this.focusOnLocationField=e=>{this.setState({termAutocompletionEnabled:!1}),e.preventDefault()},this.state={term:"",location:"",sortBy:u["Best Match"],termError:!1,locationError:!1,termAutocompletionEnabled:!1}}handleSortByChange(e){this.setState({sortBy:e}),""!==this.state.term&&""!==this.state.location&&this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)}renderSortByOptions(){return Object.keys(u).map(e=>{const t=u[e];return s.a.createElement("li",{className:t===this.state.sortBy?"active":"",key:t,onClick:this.handleSortByChange.bind(this,t)},e)})}render(){return s.a.createElement("div",{className:"SearchBar"},s.a.createElement("div",{className:"SearchBar-sort-options"},s.a.createElement("ul",null,this.renderSortByOptions())),s.a.createElement("div",{className:"SearchBar-fields"},s.a.createElement("form",{method:"#",onKeyDown:this.handleSearch,autoComplete:"on"},s.a.createElement("div",null,s.a.createElement("div",{className:"inputFieldErrorMessage"},this.state.termError?"The field cannot be empty":""),s.a.createElement("input",{onChange:this.handleTermChange,placeholder:"Search",value:this.state.term,className:this.state.termError?"inputFieldError":"",ref:"restaurantField",id:"restaurantField",autoComplete:"off",autoFocus:!0}),s.a.createElement(b,{userInput:this.state.term,setTermValue:this.setTermValue,suggestionsEnabled:this.state.termAutocompletionEnabled,location:this.state.location})),s.a.createElement("div",null,s.a.createElement("div",{className:"inputFieldErrorMessage"},this.state.locationError?"The field cannot be empty":""),s.a.createElement("input",{onChange:this.handleLocationChange,onFocus:this.focusOnLocationField,placeholder:"Where?",className:this.state.locationError?"inputFieldError":"",ref:"locationField",id:"locationField"})))),s.a.createElement("div",{className:"SearchBar-submit"},s.a.createElement("button",{onClick:this.handleSearch},"Search")))}}const y={search:(e,t,a)=>fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(a),{headers:{Authorization:"Bearer ".concat("AtXwTkXAS_KRjWQfaQqZby_CgxqfySQsmzZwqXZjglLvYi29i69_ToIcvXeGPYMG75gqVTQz9o-U-kxr8FKrt-vIdsCNpweeNnf3NVuYlInAm2MrHqeb5DhmamhGXHYx")}}).then(e=>e.json()).then(e=>e.businesses.map(t=>{if(e.businesses)return{id:t.id,imageSrc:t.image_url,name:t.name,address:t.location.address1,city:t.location.city,state:t.location.state,zipCode:t.location.zip_code,category:t.categories[0].title,rating:t.rating,reviewCount:t.review_count,url:t.url,phone:t.phone,priceRange:t.price};throw Error("Nothing was returned")})).catch(()=>[])};var S=a(14);a(58);class k extends s.a.Component{render(){return s.a.createElement("div",{className:"spinner-container"},s.a.createElement(S.FadeLoader,{css:"margin-top: 10rem;",sizeUnit:"rem",size:6,color:"black",loading:this.props.loading}))}}a(59);const N=s.a.memo(({errorMessage:e})=>s.a.createElement("h3",{className:"error"},e));var C=a(16),B=(a(60),a(6));const M={height:"2.3rem",margin:".1rem .3rem"},L=s.a.memo(()=>{const e=Object(n.useState)(!1),t=Object(C.a)(e,2),a=t[0],r=t[1];return s.a.createElement("div",{className:"Login",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},s.a.createElement("button",{className:a?"Login-Button Login-Button-Active":"Login-Button"},"Log In With"),s.a.createElement("div",{className:a?"Login-Menu":"Login-Menu hidden"},s.a.createElement(B.FacebookLoginButton,{style:M},s.a.createElement("span",null,"Facebook")),s.a.createElement(B.GoogleLoginButton,{style:M},s.a.createElement("span",null,"Google")),s.a.createElement(B.TwitterLoginButton,{style:M},s.a.createElement("span",null,"Twitter"))))});class A extends s.a.Component{constructor(e){super(e),this.searchYelp=(e,t,a)=>{this.setState({businesses:[],loading:!0}),y.search(e,t,a).then(e=>{e.length>0?this.setState({loading:!1,businesses:e,errorMessage:""}):this.setState({loading:!1,businesses:[],errorMessage:"Your search hasn't returned any results. Please check your input or Internet connection"})})},this.clearErrorMessageAndSearchResults=()=>{this.setState({businesses:[],errorMessage:""})},this.state={businesses:[],loading:!1,errorMessage:""}}render(){return s.a.createElement("div",{className:"App"},s.a.createElement("nav",{className:"NavMenu"},s.a.createElement("div",{className:"Logo"},s.a.createElement("h1",null,"Ravenous")),s.a.createElement("div",{className:"LoginMenu"},s.a.createElement(L,null))),s.a.createElement(w,{searchYelp:this.searchYelp,clearErrorMessageAndSearchResults:this.clearErrorMessageAndSearchResults}),s.a.createElement(k,{loading:this.state.loading}),s.a.createElement(m,{businesses:this.state.businesses}),s.a.createElement(N,{errorMessage:this.state.errorMessage}))}}var F=A;const T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(s.a.createElement(F,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/search-restaurants",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/search-restaurants","/service-worker.js");T?(!function(e,t){fetch(e).then(a=>{const n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):R(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):R(t,e)})}}()}},[[17,1,2]]]);
//# sourceMappingURL=main.bafd6d30.chunk.js.map