(this.webpackJsonpravenous=this.webpackJsonpravenous||[]).push([[0],{18:function(e,t,a){e.exports=a(61)},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(13),o=a.n(r),i=(a(23),a(24),a(25),a(4)),c=a(9),l=a(5);const h={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"};i.b.add(l.a,l.b);const u=e=>{const t=e.business,a=t.address,s=t.category,r=t.city,o=t.imageSrc,i=t.name,l=t.phone,h=t.priceRange,u=t.rating,m=t.reviewCount,d=t.state,g=t.url,p=t.zipCode;return n.a.createElement("div",{className:"Business"},n.a.createElement("div",{className:"image-container"},n.a.createElement("img",{src:o,alt:i,loading:"lazy"}),n.a.createElement("h2",null,i),n.a.createElement("div",{className:"Business-information"},n.a.createElement("div",{className:"Business-address"},n.a.createElement("p",null,n.a.createElement("a",{href:"".concat("https://www.google.com/maps/place/").concat(a," ").concat(r),target:"_blank",rel:"noopener noreferrer"},a," ",n.a.createElement(c.a,{icon:"map-marker-alt"}))),n.a.createElement("p",null,r),n.a.createElement("p",null,d," ",p),n.a.createElement("p",null,l,n.a.createElement(c.a,{icon:"phone"}))),n.a.createElement("div",{className:"Business-reviews"},n.a.createElement("h3",null,s),n.a.createElement("h3",null,h),n.a.createElement("h3",{className:"rating"},u," star",u>0&&u<=1?"":"s"),n.a.createElement("p",null,m," review",1===m?"":"s"))),n.a.createElement("a",{href:g,target:"_blank",rel:"noopener noreferrer"},"Open restaurants's page")))};a(31);const m=n.a.memo(({businesses:e})=>n.a.createElement("div",{className:"BusinessList"},e.map(e=>n.a.createElement(u,{key:e.id,business:e}))));var d=a(10),g=a.n(d),p=a(14);const E=["mcdonald's","kfc","sushi","subway","pizza","steakhouse","korean","german","french","ethiopian","arab","uzbek","greek","italian","thai","vietnamese","indian","chinese","russian","mexican","american","cuban","ukrainian","canadian","japanese","steak","downtown","mediterranean","fast food","bbq","brazilian","vegetarian","punjabi"];var v=function(){var e=Object(p.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();a(33);class f extends s.Component{constructor(e){super(e),this.handleClick=e=>{this.props.setTermValue(e.currentTarget.innerHTML),this.setState({suggestionsEnabled:!1})},this.handleKeyPress=e=>{console.log(e.keyCode)},this.state={activeItem:null,filteredSuggestions:[],suggestions:[],suggestionsEnabled:this.props.suggestionsEnabled}}componentDidMount(){v(this.props).then(e=>{this.setState({suggestions:e})})}componentWillReceiveProps(e){let t;if(!e.suggestionsEnabled||this.state.filteredSuggestions.includes(e.userInput)||!e.userInput)return this.setState({suggestionsEnabled:!1}),null;t=this.state.suggestions.filter(t=>t.toLowerCase().startsWith(e.userInput.toLowerCase())),this.setState({filteredSuggestions:t,suggestionsEnabled:!0})}render(){return this.state.suggestionsEnabled?n.a.createElement("ul",{className:"suggestions",onKeyDown:this.handleKeyPress},this.state.filteredSuggestions.map(e=>n.a.createElement("li",{className:"suggestionItem",key:e,onClick:this.handleClick,value:e},e))):null}}var b=f,w=(a(34),a(8)),y=a.n(w);class S extends s.Component{constructor(e){super(e),this.handleTermChange=e=>{this.setState({term:e.target.value,termError:e.target.value.length>0&&!1,termAutocompletionEnabled:!0}),e.preventDefault()},this.handleLocationChange=e=>{this.setState({location:e.target.value,locationError:e.target.value.length>0&&!1})},this.handleSearch=e=>{"click"!==e.type&&13!==e.keyCode||(this.props.clearErrorMessageAndSearchResults(),""===this.state.location&&""===this.state.term?this.setState({termError:!0,locationError:!0}):""===this.state.term?this.setState({termError:!0,locationError:!1}):""===this.state.location?this.setState({termError:!1,locationError:!0}):(this.setState({termError:!1,locationError:!1,isLoading:!0}),this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)),e.preventDefault())},this.setTermValue=e=>{this.setState({term:e}),this.refs.locationField.focus()},this.focusOnLocationField=e=>{this.setState({termAutocompletionEnabled:!1}),e.preventDefault()},this.state={term:"",location:"",sortBy:h["Best Match"],termError:!1,locationError:!1,termAutocompletionEnabled:!1}}handleSortByChange(e){this.setState({sortBy:e}),""!==this.state.term&&""!==this.state.location&&this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)}renderSortByOptions(){return Object.keys(h).map(e=>{const t=h[e];return n.a.createElement("li",{className:t===this.state.sortBy?"active":"",key:t,onClick:this.handleSortByChange.bind(this,t)},e)})}render(){return n.a.createElement("div",{className:"SearchBar"},n.a.createElement("div",{className:"SearchBar-sort-options"},n.a.createElement("ul",null,this.renderSortByOptions())),n.a.createElement("div",{className:"SearchBar-fields"},n.a.createElement("form",{method:"#",onKeyDown:this.handleSearch,autoComplete:"on"},n.a.createElement("div",null,n.a.createElement("div",{className:"inputFieldErrorMessage"},this.state.termError?"The field cannot be empty":""),n.a.createElement("input",{onChange:this.handleTermChange,placeholder:"Search",value:this.state.term,className:this.state.termError?"inputFieldError":"",ref:"restaurantField",id:"restaurantField",autoFocus:!0}),n.a.createElement(b,{userInput:this.state.term,setTermValue:this.setTermValue,suggestionsEnabled:this.state.termAutocompletionEnabled,location:this.state.location})),n.a.createElement("div",null,n.a.createElement("div",{className:"inputFieldErrorMessage"},this.state.locationError?"The field cannot be empty":""),n.a.createElement("input",{onChange:this.handleLocationChange,onFocus:this.focusOnLocationField,placeholder:"Where?",className:this.state.locationError?"inputFieldError":"",ref:"locationField",id:"locationField"})))),n.a.createElement("div",{className:"SearchBar-submit"},n.a.createElement("button",{onClick:this.handleSearch},this.props.isLoading?n.a.createElement(y.a,{color:"white",size:"18"}):"Search")))}}const k={search:(e,t,a)=>fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(a),{headers:{Authorization:"Bearer ".concat("AtXwTkXAS_KRjWQfaQqZby_CgxqfySQsmzZwqXZjglLvYi29i69_ToIcvXeGPYMG75gqVTQz9o-U-kxr8FKrt-vIdsCNpweeNnf3NVuYlInAm2MrHqeb5DhmamhGXHYx")}}).then(e=>e.json()).then(e=>e.businesses.map(t=>{if(e.businesses)return{id:t.id,imageSrc:t.image_url,name:t.name,address:t.location.address1,city:t.location.city,state:t.location.state,zipCode:t.location.zip_code,category:t.categories[0].title,rating:t.rating,reviewCount:t.review_count,url:t.url,phone:t.phone,priceRange:t.price};throw Error("Nothing was returned")})).catch(()=>[])};var L=a(16);a(58);class N extends n.a.Component{render(){return n.a.createElement("div",{className:"spinner-container"},n.a.createElement(L.FadeLoader,{css:"margin-top: 10rem;",sizeUnit:"rem",size:6,color:"black",loading:this.props.isLoading}))}}a(59);const C=n.a.memo(({errorMessage:e})=>n.a.createElement("h3",{className:"error"},e));var B=a(17),M=(a(60),a(6));const A={height:"2.3rem",margin:".1rem .3rem"},F=n.a.memo(()=>{const e=Object(s.useState)(!1),t=Object(B.a)(e,2),a=t[0],r=t[1];return n.a.createElement("div",{className:"Login",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},n.a.createElement("button",{className:a?"Login-Button Login-Button-Active":"Login-Button"},"Log In With"),n.a.createElement("div",{className:a?"Login-Menu":"Login-Menu hidden"},n.a.createElement(M.FacebookLoginButton,{style:A},n.a.createElement("span",null,"Facebook")),n.a.createElement(M.GoogleLoginButton,{style:A},n.a.createElement("span",null,"Google")),n.a.createElement(M.TwitterLoginButton,{style:A},n.a.createElement("span",null,"Twitter"))))});class T extends n.a.Component{constructor(e){super(e),this.searchYelp=(e,t,a)=>{this.setState({businesses:[],isLoading:!0}),k.search(e,t,a).then(e=>{e.length>0?this.setState({isLoading:!1,businesses:e,errorMessage:""}):this.setState({isLoading:!1,businesses:[],errorMessage:"Your search hasn't returned any results. Please check your input or Internet connection"})})},this.clearErrorMessageAndSearchResults=()=>{this.setState({businesses:[],errorMessage:""})},this.state={businesses:[],isLoading:!1,errorMessage:""}}render(){return n.a.createElement("div",{className:"App"},n.a.createElement("nav",{className:"NavMenu"},n.a.createElement("div",{className:"Logo"},n.a.createElement("h1",null,"Ravenous")),n.a.createElement("div",{className:"LoginMenu"},n.a.createElement(F,null))),n.a.createElement(S,{searchYelp:this.searchYelp,clearErrorMessageAndSearchResults:this.clearErrorMessageAndSearchResults,isLoading:this.state.isLoading}),n.a.createElement(N,{isLoading:this.state.isLoading}),n.a.createElement(m,{businesses:this.state.businesses}),n.a.createElement(C,{errorMessage:this.state.errorMessage}))}}var z=T;const R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(n.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/search-restaurants",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/search-restaurants","/service-worker.js");R?(!function(e,t){fetch(e).then(a=>{const s=a.headers.get("content-type");404===a.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):I(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):I(t,e)})}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.e3752118.chunk.js.map